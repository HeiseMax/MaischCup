{% block styles %}
<style>
    .result-form {
        margin-top: 20px;
        text-align: center;
    }
    .result-form select, .result-form input {
        margin: 5px;
        padding: 5px;
    }
</style>
{% endblock %}

<html>
    <div class="result-form">
        <h2>Submit Match Result</h2>
        <form method="POST" action="/update_score">
            <label for="player1_id">Player 1:</label>
            <select name="player1_id" id="player1_id">
                {% for player in players %}
                <option value="{{ player.id }}" {% if session.get('player_id') == player.id %}selected{% endif %}>{{ player.name }}</option>
                {% endfor %}
            </select>
            <label for="player2_id">Player 2:</label>
            <select name="player2_id" id="player2_id">
                {% for player in players %}
                <option value="{{ player.id }}">{{ player.name }}</option>
                {% endfor %}
            </select>
            <label for="score1">Player 1 Score:</label>
            <select name="score1" id="score1">
                <option value="">-</option>
                {% for i in range(6) %}
                <option value="{{ i }}">{{ i }}</option>
                {% endfor %}
            </select>
            <label for="score2">Player 2 Score:</label>
            <select name="score2" id="score2">
                <option value="">-</option>
                {% for i in range(6) %}
                <option value="{{ i }}">{{ i }}</option>
                {% endfor %}
            </select>
            <button type="submit" id="submit-button" disabled>Submit</button>
        </form>
    </div>
</html>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const player1Select = document.getElementById('player1_id');
        const player2Select = document.getElementById('player2_id');
        const score1Select = document.getElementById('score1');
        const score2Select = document.getElementById('score2');
        const submitButton = document.getElementById('submit-button');

        function validateScores() {
            const player1 = parseInt(player1Select.value);
            const player2 = parseInt(player2Select.value);
            const score1 = parseInt(score1Select.value);
            const score2 = parseInt(score2Select.value);

            if (player1 !== player2 && !isNaN(score1) && !isNaN(score2) && ((score1 === 5 || score2 === 5) && !(score1 === 5 && score2 === 5))) {
                submitButton.disabled = false;
            } else {
                submitButton.disabled = true;
            }
        }

        player1Select.addEventListener('change', validateScores);
        player2Select.addEventListener('change', validateScores);
        score1Select.addEventListener('change', validateScores);
        score2Select.addEventListener('change', validateScores);
    });
</script>